<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>订单支付 - 旅游资讯平台</title>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/payment.css">
</head>
<body>
    <div id="payment">
        <header class="header">
            <nav class="nav">
                <div class="logo">
                    <i class="fas fa-globe-asia"></i>
                    <span>旅游资讯</span>
                </div>
            </nav>
        </header>

        <main class="main-content">
            <el-card class="payment-card">
                <div class="payment-header">
                    <h2>订单支付</h2>
                    <div class="order-info">
                        <p class="order-title">{{order.title}}</p>
                        <p class="order-amount">￥{{order.amount}}</p>
                    </div>
                    <div class="payment-timer" v-if="remainingTime > 0">
                        <i class="el-icon-time"></i>
                        <span>支付剩余时间：{{formatTime(remainingTime)}}</span>
                    </div>
                    <div class="payment-status" v-if="order">
                        <el-steps :active="paymentStep" finish-status="success">
                            <el-step title="创建订单"></el-step>
                            <el-step title="等待支付"></el-step>
                            <el-step title="支付完成"></el-step>
                        </el-steps>
                    </div>
                </div>

                <div class="payment-body">
                    <div class="qr-section">
                        <img :src="order.payment.qrcode" class="qr-code" alt="支付二维码">
                        <p class="qr-tip">请使用{{getPaymentMethodName}}扫码支付</p>
                    </div>

                    <div class="payment-method">
                        <el-radio-group v-model="paymentMethod" @change="handlePaymentChange">
                            <el-radio label="wechat">
                                <i class="fab fa-weixin"></i> 微信支付
                            </el-radio>
                            <el-radio label="alipay">
                                <i class="fab fa-alipay"></i> 支付宝
                            </el-radio>
                        </el-radio-group>
                    </div>
                </div>

                <div class="payment-footer">
                    <el-button @click="cancelPayment" :disabled="loading">取消支付</el-button>
                    <el-button type="primary" 
                               @click="checkPaymentStatus" 
                               :loading="loading"
                               :disabled="remainingTime <= 0">
                        {{ loading ? '正在确认支付' : '已完成支付' }}
                    </el-button>
                </div>
            </el-card>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="../js/payment.js"></script>
</body>
</html> 